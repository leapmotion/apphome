// Generated by CoffeeScript 1.6.3
(function() {
  var appendScript, appendStylesheet, applyStylus, fs, stylus;

  fs = require("fs");

  stylus = require("stylus");

  appendScript = function(src, contextDocument) {
    return $("body", contextDocument).append("<script src=\"" + src + "\"></script>");
  };

  appendStylesheet = function(href, contextDocument) {
    return $("body", contextDocument).append("<link rel=\"stylesheet\" type=\"text/css\" href=\"" + href + "\"/>");
  };

  applyStylus = function(stylusPath, contextDocument) {
    var injectedCssFiles, stylusSrc;
    contextDocument = contextDocument || window.document;
    injectedCssFiles = contextDocument._injectedCssFiles = contextDocument._injectedCssFiles || {};
    if (!injectedCssFiles[stylusPath]) {
      injectedCssFiles[stylusPath] = true;
      stylusSrc = fs.readFileSync(stylusPath, "utf-8");
      return stylus.render(stylusSrc, {
        filename: stylusPath
      }, function(err, renderedCss) {
        if (err) {
          throw err;
        } else {
          return $("<style/>", contextDocument).text(renderedCss).appendTo($("head", contextDocument));
        }
      });
    }
  };

  module.exports.appendScript = appendScript;

  module.exports.appendStylesheet = appendStylesheet;

  module.exports.applyStylus = applyStylus;

}).call(this);
