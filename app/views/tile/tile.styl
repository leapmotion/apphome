
$borderWidth = 4px
$borderColor = #bbb
$borderRadius = 4px
$progressBarColor = #e1e1e1
$tileH = 176px
$tileW = 320px

messageState(state, tileOpacity = .7)
  &.{state}
    .install-overlay
      unless state is notyetinstalled
        display block

      .{state}
        display block
    .tile-bg
      opacity tileOpacity

.tile
  border-radius $borderRadius
  -webkit-backface-visibility hidden
  float left
  height $tileH
  list-style none
  margin 16px
  position relative
  -webkit-user-drag element
  width $tileW
  box-shadow 0 0 24px 4px rgba(0, 0, 0, 0.6)


  messageState(notyetinstalled, .7)
  messageState(waiting, .5)
  messageState(connecting, .5)
  messageState(installing, 1)
  messageState(moving, 1)
  messageState(launching, .7)

  &.downloading
    .progress, .message .spinner, .cancel
      display block


  &.ready, &.notyetinstalled, &.installfailed, &.uninstalled
    cursor pointer

    &:hover
      background-clip padding-box
      box-shadow 0 0 24px 4px rgba(255,255,255,.6) // outer glow

      &:before, &:after
        background -webkit-linear-gradient(top,  #ebebeb 0%,#a1a1a1 91%,#7d7d7d 100%) /* Chrome10+,Safari5.1+ */
        background linear-gradient(to bottom,  #ebebeb 0%,#a1a1a1 91%,#7d7d7d 100%) /* W3C */
        background-clip padding-box
        border-radius $borderRadius+1
        content ""
        display block
        height $tileH+2
        left -1px
        position absolute
        top -1px
        width $tileW+2
        z-index -1
      &:after
        background -webkit-linear-gradient(top, #dcdcdc 0%, #a7a7a7 100%) /* Chrome10+,Safari5.1+ */
        background linear-gradient(to bottom, #dcdcdc 0%, #a7a7a7 100%) /* W3C */
        border-radius 7px
        height $tileH+6
        left -3px
        top -3px
        width $tileW+6
        z-index -2

      h3
        color #fff

  .icon
    position absolute
    width 96px
    height 96px
    left 111px
    top 39px
    display block
    border-radius 10px
    -webkit-user-drag none

  img.tile-bg
    border-radius $borderRadius
    position absolute
    top 0
    left 0
    width 100%
    height 100%
    overflow hidden
    -webkit-user-drag none

  .update-notification
    background-color #222
    border-radius 12px
    color #98cff8
    display none
    font-size 28px
    height 24px
    line-height 25px
    position absolute
    right -8px
    text-shadow 0 0 10px rgba(15,20,7,0.8)
    top -8px
    vertical-align text-top
    z-index 1000

  &.ready:hover

    .hover-overlay
      -webkit-transform scale(1)
      opacity 1
      display block

    .tile-bg
      -webkit-filter blur(5px)

  .hover-overlay-wrapper
    overflow hidden
    width 100%
    height 100%

  .hover-overlay
    background rgba(0, 0, 0, 0.2)
    border none
    border-radius 4px
    color white
    font-size 20px
    height 100%
    width 100%
    box-sizing border-box
    position relative
    padding 10px 18px
    text-shadow 0 2px 10px black
    -webkit-transform scale(1.3)
    -webkit-transition .15s
    -webkit-transition-timing-function ease-in-out
    opacity 0

    .name
      margin-top 0
      overflow hidden
      text-overflow ellipsis
      white-space nowrap

    .description
      width 100%
      overflow hidden
      text-overflow ellipsis
      display -webkit-box
      -webkit-line-clamp 4
      -webkit-box-orient vertical

  .install-overlay
    background -webkit-linear-gradient(top, #272c31 0%, #141719 100%)
    border 1px solid #424242
    border-radius 18px
    box-shadow 0 0 10px rgba(0, 0, 0, 0.5)
    color white
    display none
    height 36px
    font-size 21px
    left 20%
    line-height 34px
    margin-top -17px
    position absolute
    text-align center
    top 50%
    width 60%

    .notyetinstalled, .waiting, .installing, .moving, .connecting, .launching
      display none

  .progress
    background-color rgba(37,37,37,.5)
    border 2px solid $progressBarColor
    border-radius 10px
    display none
    height 12px
    left 15%
    margin-top -6px
    padding 2px
    position absolute
    top 50%
    width 70%

    .bar
      width 0
      height 100%
      background-color $progressBarColor
      border-radius 16px

  .cancel
    background-image url(static/images/cancel-download.png)
    cursor pointer
    display none
    height 20px
    left 22px
    margin-top -6px
    opacity .88
    position absolute
    top 50%
    width 20px

    &:hover
      opacity 1

  &.notyetinstalled

    &:hover
      .install-overlay
        display block

  &.ready.update
    .update-notification
      display block

vendors = webkit
@keyframes pulse
  0%
    -webkit-transform scale(1.0)
  100%
    opacity: 0
    -webkit-transform scale(8.0)

